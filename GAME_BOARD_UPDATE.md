# 游戏版图更新说明

## 🎯 更新概述

根据 Splendor Duel 游戏规则，我们重新设计了游戏版图布局，实现了左右分栏的布局：左侧是游戏主板图，右侧是两名玩家的状态。

## 🔄 新的布局结构

### 整体布局
- **左侧（2/3宽度）**: 游戏主板图
- **右侧（1/3宽度）**: 玩家状态面板
- **底部**: 聊天面板和历史记录面板

### 左侧游戏主板图

#### 1. 宝石袋子（左上角）
- 显示玩家购买发展卡花费的宝石数量
- 使用 💎 图标和数字显示
- 自动计算：总宝石数 - 场上可用宝石数

#### 2. 胜利目标提示卡（左边中间）
- 显示游戏目标图片
- 使用 `/images/game/goal.jpg` 资源

#### 3. 拿取宝石的板块（中间）
- 3x3 网格布局显示可用宝石
- 每种宝石显示图标和数量
- 点击可选择宝石

#### 4. 贵族卡（右边最下方）
- 4张贵族卡水平排列
- 显示图片和分数
- 点击可选择贵族

#### 5. 公共发展卡区域（右边）
- **特权指示物**: 显示场上未被获得的特权指示物数量（固定3个）
- **未被翻开的发展卡堆**: 3个等级各自堆成一堆，显示卡背和剩余数量
- **被翻开的发展卡**: 保持固定数量
  - 1级：5张
  - 2级：4张
  - 3级：3张

### 右侧玩家状态

#### 每个玩家显示：
1. **玩家信息**: 姓名、房主标识
2. **宝石**: 7种宝石的持有数量
3. **Bonus**: 5种一般颜色的bonus数量
4. **保留的发展卡**: 最多3张，显示卡背和等级
5. **特权指示物**: 数量显示
6. **皇冠**: 数量显示
7. **贵族**: 已获取的贵族列表
8. **分数**: 总分显示

#### 特殊功能：
- 当前玩家高亮显示（蓝色边框）
- 保留的卡对对方不可见（只显示卡背）
- 空位用"空"标识填充

## 🎮 交互功能

### 宝石选择
- 点击宝石可选择拿取
- 触发 `gem-selected` 事件

### 发展卡选择
- 点击被翻开的发展卡可选择购买
- 触发 `card-selected` 事件

### 贵族选择
- 点击贵族卡可选择获取
- 触发 `noble-selected` 事件

## 📱 响应式设计

### 桌面端（>1200px）
- 左右分栏布局
- 游戏主板图占2/3宽度
- 玩家状态占1/3宽度

### 平板端（768px-1200px）
- 游戏主板图变为网格布局
- 玩家状态移到下方
- 聊天和历史记录面板并排

### 移动端（<768px）
- 所有元素垂直排列
- 宝石板块变为2列布局
- 贵族卡变为2列布局

## 🔧 技术实现

### CSS Grid 布局
```css
.game-main-board {
  display: grid;
  grid-template-areas: 
    "bag objectives objectives"
    "bag gem-board development"
    "bag gem-board development"
    "nobles nobles development";
  grid-template-columns: 1fr 2fr 2fr;
  grid-template-rows: auto 1fr 1fr auto;
}
```

### 计算属性
- `totalGemsInBag`: 计算袋子里宝石数量
- `availablePrivilegeTokens`: 场上特权指示物数量
- `unflippedCards`: 各等级未翻开卡牌数量
- `getFlippedCardsByLevel`: 获取被翻开的卡牌

### 事件处理
- 所有游戏动作通过事件向上传递
- 父组件处理具体的游戏逻辑

## 🚀 下一步

现在游戏版图已经完成，接下来我们可以：

1. **实现发展卡功能**
   - 卡牌购买逻辑
   - 卡牌翻开机制
   - 卡牌堆补充逻辑

2. **实现游戏流程**
   - 回合制游戏逻辑
   - 宝石获取规则
   - 胜利条件检查

3. **完善游戏状态管理**
   - 实时状态同步
   - 游戏历史记录
   - 错误处理和验证

## 📝 注意事项

- 所有图片资源路径已配置好
- 响应式设计支持各种屏幕尺寸
- 玩家状态实时更新
- 保留的卡对对方不可见
- 特权指示物和宝石袋子使用数字显示
